<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Thanks for peeking. Take a look around, but nothing too fancy to see here. -->
    <title>Kristen & Ruoyu</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Ryca" />
    <meta
      name="description"
      content="Save the date landing page for Kristen and Ruoyu's November 2024 wedding."
    />
    <link rel="stylesheet" href="main.css" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./assets/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./assets/favicon/favicon-16x16.png"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="preload"
      href="./assets/fountain-proposal.jpg"
      as="image"
      media="all"
    />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  </head>

  <body>
    <div class="landing">
      <!-- <header>
        <nav>
          <ul class="primary-font">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#events">Events</a></li>
          </ul>
        </nav>
      </header> -->
      <video
        autoplay
        loop
        muted
        playsinline
        poster="./assets/fountain-proposal.jpg"
      >
        <source src="./assets/Hero Video 720P.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <script>
        const minDownlink = 1;
        const goodDownlink = 7;
        var downlink = minDownlink + 0.1; // assume downlink is fine in the case downlink cannot be determined
        try {
          downlink = navigator.connection.downlink;
        } catch (e) {
          console.log("Unable to determine downlink");
        }
        if (downlink < minDownlink) {
          document.querySelector("source").src = "";
          console.log("Downlink is below minimum reqs - overriding source");
        } else if (downlink > goodDownlink) {
          document.querySelector("source").src = "./assets/Hero Video.mp4";
          console.log("Downlink is above 7 - will pla HD video");
        } else {
          console.log("Downlink is fine - will play video");
        }
      </script>
      <div class="landing-text">
        <h1 class="primary-font">Kristen & Ruoyu</h1>
      </div>
      <div class="arrows"></div>
    </div>

    <section class="countdown-section">
      <div class="date-text primary-font">
        <h1 data-aos="fade-up">November 16, 2024</h1>
      </div>
      <div class="countdown-text secondary-font">
        <h2 class="countdown-day">00 DAYS</h2>
        <h2 class="countdown-hour">00 HOURS</h2>
        <h2 class="countdown-minute">00 MINUTES</h2>
        <h2 class="countdown-second">00 SECONDS</h2>
      </div>
    </section>

    <section class="add-to-calendar-section">
      <add-to-calendar-button
        name="Kristen and Ruoyu's Wedding"
        description="Adding Kristen and Ruoyu's wedding to your calendar"
        startDate="2024-11-16"
        startTime="15:30"
        endDate="2024-11-16"
        endTime="21:30"
        timeZone="America/Los_Angeles"
        location="Colony House, Anaheim"
        options="'Apple','Google','iCal','Outlook.com','Yahoo'"
      ></add-to-calendar-button>
    </section>

    <section class="envelope-section">
      <h1 class="primary-font envelope-prompt">Open your mail!</h1>
      <div class="envlope-wrapper">
        <div id="envelope" data-aos="zoom-in-up" class="close floating">
          <div class="front flap"></div>
          <div class="front pocket"></div>

          <div class="letter cursive-font">
            <div class="words">
              <p class="intro">Dear Guest,</p>
              <p>
                Save the date for the wedding of Kristen & Ruoyu on November 16
                2024 in Anaheim, CA. Invitation to follow.
              </p>
            </div>
            <img
              class="letter-stamp"
              alt="green flowers"
              src="./assets/green-flower.png"
            />
          </div>
          <img
            class="click-btn"
            alt="pointer clicking"
            src="./assets/click.png"
          />
        </div>
      </div>
    </section>

    <section class="gallery-section">
      <div class="gallery-container">
        <div class="gallery-col">
          <img
            class="gallery-img horizontal-img"
            src="./assets/gallery/gallery-1.jpeg"
          />
          <img
            class="gallery-img standard-img"
            src="./assets/gallery/gallery-2.jpeg"
          />
          <div class="gallery-row">
            <img
              class="gallery-img standard-img-small hidden-on-mobile"
              src="./assets/gallery/gallery-3.jpeg"
            />
            <img
              class="gallery-img standard-img-small"
              src="./assets/gallery/gallery-4.jpeg"
            />
          </div>
          <img
            class="gallery-img horizontal-img"
            src="./assets/gallery/gallery-7.jpeg"
          />
        </div>
        <div class="gallery-col responsive-col">
          <div style="width: 100%">
            <img
              class="gallery-img tall-img"
              src="./assets/gallery/gallery-5.jpeg"
            />
          </div>
          <div style="width: 100%">
            <img
              class="gallery-img tall-img"
              src="./assets/gallery/gallery-6.jpeg"
            />
          </div>
          <img
            class="gallery-img standard-img-small hidden-on-mobile"
            src="./assets/gallery/gallery-15.jpeg"
          />
        </div>
        <div class="gallery-col">
          <img
            class="gallery-img horizontal-img"
            src="./assets/gallery/gallery-14.jpeg"
          />
          <div class="gallery-row">
            <img
              class="gallery-img tall-img"
              src="./assets/gallery/gallery-8.jpeg"
            />
            <div class="gallery-col responsive-col">
              <img
                class="gallery-img standard-img-small"
                src="./assets/gallery/gallery-9.jpeg"
              />
              <img
                class="gallery-img standard-img-small"
                src="./assets/gallery/gallery-10.jpeg"
              />
            </div>
          </div>
          <img
            class="gallery-img standard-img"
            src="./assets/gallery/gallery-11.jpeg"
          />
        </div>
      </div>
    </section>

    <div class="audio-control-container">
      <audio
        class="audio-src"
        src="./assets/still-into-you-isabella-kensington.mp3"
        autostart="false"
        volume="0.2"
      >
        Your browser does not support the audio element.
      </audio>
      <button class="toggle-music-btn" onclick="toggleMusic()">
        <img
          class="toggle-music-icon"
          alt="play/pause button"
          src="./assets/icons8-circled-play-50.png"
        />
      </button>
      <p class="primary-font toggle-music-text">Let's tumblr this</p>
    </div>

    <footer class="primary-font">
      <p>&copy; 2024 Kristen & Ruoyu's Wedding</p>
    </footer>
  </body>

  <script
    src="https://cdn.jsdelivr.net/npm/add-to-calendar-button@2"
    async
    defer
  ></script>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

  <script>
    var envelopeIsOpen = false;
    var audioIsPlaying = false;
    var openCounter = 0;
    var envelopeClickBtn = document.querySelector(".click-btn");
    var envelopePrompt = document.querySelector(".envelope-prompt");
    var audio = document.querySelector(".audio-src");
    var toggleMusicIcon = document.querySelector(".toggle-music-icon");
    var toggleMusicText = document.querySelector(".toggle-music-text");
    var playBtnSrc = "./assets/icons8-circled-play-50.png";
    var pauseBtnSrc = "./assets/icons8-pause-button-50.png";
    var scrollPosToggleTextIntro = 130;
    var scrollPosToggleTextExit = 800;
    audio.volume = 0.3;

    function countdownTimer() {
      var endTime = new Date("November 16, 2024 15:30:00 PDT");
      var endTime = Date.parse(endTime) / 1000;

      var now = new Date();
      var now = Date.parse(now) / 1000;

      var timeLeft = endTime - now;

      var days = Math.floor(timeLeft / 86400); // 86400 seconds in a day
      var hours = Math.floor((timeLeft - days * 86400) / 3600); // 3600 seconds in an hour
      var minutes = Math.floor((timeLeft - days * 86400 - hours * 3600) / 60);
      var seconds = Math.floor(
        timeLeft - days * 86400 - hours * 3600 - minutes * 60
      );

      if (hours < "10") {
        hours = "0" + hours;
      }
      if (minutes < "10") {
        minutes = "0" + minutes;
      }
      if (seconds < "10") {
        seconds = "0" + seconds;
      }

      document.querySelector(".countdown-day").innerHTML = days + " DAYS";
      document.querySelector(".countdown-hour").innerHTML = hours + " HOURS";
      document.querySelector(".countdown-minute").innerHTML =
        minutes + " MINUTES";
      document.querySelector(".countdown-second").innerHTML =
        seconds + " SECONDS";
    }

    setInterval(function () {
      countdownTimer();
    }, 1000);

    function toggleMusic() {
      if (audioIsPlaying) {
        audio.pause();
        audioIsPlaying = false;
        toggleMusicIcon.src = playBtnSrc;
      } else {
        audio.play();
        audioIsPlaying = true;
        toggleMusicIcon.src = pauseBtnSrc;
      }
    }

    function checkScrollPosition() {
      let windowY = window.scrollY;
      if (windowY < scrollPosToggleTextIntro || windowY > 800) {
        toggleMusicText.classList.add("is-hidden");
      } else {
        toggleMusicText.classList.remove("is-hidden");
      }
    }

    function openEnvelope() {
      envelope.classList.add("open");
      envelope.classList.remove("close");
      envelope.classList.remove("floating");
      envelopeClickBtn.remove();
      envelopePrompt.classList.add("is-hidden");
      envelopeIsOpen = true;
      openCounter += 1;
    }
    function closeEnvelope() {
      envelope.classList.add("close");
      envelope.classList.add("floating");
      envelope.classList.remove("open");
      envelopeIsOpen = false;
    }

    document.addEventListener("DOMContentLoaded", function () {
      var envelope = document.querySelector("#envelope");
      var scrollArrows = document.querySelector(".arrows");

      scrollArrows.addEventListener("click", function () {
        document
          .querySelector(".countdown-section")
          .scrollIntoView({ behavior: "smooth" });
      });
      envelope.addEventListener("click", function () {
        if (envelopeIsOpen && openCounter % 2 == 0) {
          closeEnvelope();
        } else {
          openEnvelope();
        }
      });
    });
    window.addEventListener("scroll", checkScrollPosition);
  </script>

  <script src="fslightbox.js"></script>

  <script>
    AOS.init();
  </script>
</html>
